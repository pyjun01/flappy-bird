{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const width = 768;\nconst height = 1024;\n\nconst canvas = document.querySelector('canvas');\nconst ctx = canvas.getContext('2d');\n\ncanvas.width = width;\ncanvas.height = height;\n\nconst v = {\n  x: width / 2 - 68,\n  y: height / 2,\n  w: 17 * 4,\n  h: 13 * 4,\n};\nlet gravity = 0;\nconst velocity = 0.5;\n\nconst pipes = [];\n\nlet score = 0;\n\nlet reqId = null;\nconst stop = () => {\n  cancelAnimationFrame(reqId);\n};\n\nctx.textAlign = 'center';\nctx.font = '48px sans-serif';\n\nconst render = () => {\n  ctx.fillStyle = '#0af';\n  ctx.fillRect(0, 0, width, height);\n\n  ctx.fillStyle = '#000';\n  ctx.fillRect(v.x, v.y, v.w, v.h);\n\n  ctx.fillStyle = '#af0';\n  pipes.forEach(({ x, y, w, h }) => {\n    ctx.fillRect(x, 0, w, y);\n    ctx.fillRect(x, y + h, w, height - (y + h));\n  });\n\n  ctx.fillStyle = '#fa0';\n  ctx.fillRect(0, height - 80, width, 80);\n\n  ctx.fillStyle = '#fff';\n  ctx.fillText(score, width / 2, height / 4);\n};\n\nconst update = () => {\n  v.y += gravity;\n\n  if (gravity <= 6) {\n    gravity += velocity;\n  }\n\n  pipes.forEach((d) => {\n    d.x = d.x - 1.2;\n\n    if (!d.pass && d.x < v.x) {\n      d.pass = true;\n      score++;\n    }\n  });\n\n  if (pipes[0].x - pipes[0].w / 2 <= v.x && pipes.length === 1) {\n    pipes.push({\n      x: width,\n      y: 130 + (Math.floor(Math.random() * 4) + 1) * (height / 10),\n      w: 26 * 4,\n      h: 65 * 4,\n    });\n  } else if (pipes[0].x + pipes[0].w <= 0) {\n    pipes.shift();\n  }\n};\n\nconst FPS = 1000 / 144;\nlet p = 0;\nconst animate = (t) => {\n  console.log('animate');\n  if (t > p + FPS) {\n    console.log('real');\n    p = t;\n\n    update();\n    render();\n\n    if (checkCollision()) {\n      return;\n    }\n  }\n\n  window.requestAnimationFrame(animate);\n};\n\nrender();\n\nconst checkCollision = () => {\n  if (v.y + v.h >= height - 80) {\n    return true;\n  }\n\n  return pipes.some(\n    ({ x, y, w, h }) =>\n      ((x < v.x + v.w && v.x + v.w <= x + w) || (x < v.x && v.x <= x + w)) &&\n      (v.y <= y || y + h <= v.y + v.h)\n  );\n};\n\ncanvas.onclick = () => {\n  if (reqId === null) {\n    pipes.push({\n      x: width + 26 * 4,\n      y: height / 2 - 65 * 2,\n      w: 26 * 4,\n      h: 65 * 4,\n    });\n\n    reqId = requestAnimationFrame(animate);\n  }\n\n  gravity = Math.min(gravity, -9) - 3;\n};\n"],"names":[],"version":3,"file":"index.017db2f2.js.map","sourceRoot":"/__parcel_source_root/"}